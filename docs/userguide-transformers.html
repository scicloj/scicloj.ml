<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/sandstone/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/solarized-light.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-grid.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-theme-balham.min.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    </head>
    <body>
        <p id="loading">Loading ...</p>
        <div id="app"></div>
    </body>
    <script src="https://cdn.statically.io/gh/scicloj/gorilla-notes@master/dist/0.5.10/main.js"></script>
    <script>
     shadow.loader.load("main");
     gorilla_notes.main.main_BANG_(false, "{:options {:reverse-notes? false, :header? false, :notes-in-cards? false, :initially-collapse? false, :auto-scroll? false, :port 1903, :custom-header [:div {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} \"(notespace)\" [:p \"Mon May 24 23:03:09 CEST 2021\"] nil [:hr]], :custom-footer [:div [:hr] [:hr]]}, :ids [\"1643\" \"1279\" \"1644\" \"1521\" \"1645\" \"1646\" \"1647\" \"201\" \"1648\" \"1523\" \"1649\" \"1524\" \"206\" \"1525\" \"1650\" \"601\" \"1400\" \"1651\" \"1652\" \"651\" \"1653\" \"1654\" \"1655\" \"1656\" \"1657\" \"1531\" \"1532\" \"1292\" \"1658\" \"1407\" \"1295\" \"1229\" \"1534\" \"1659\" \"1660\" \"1661\" \"296\" \"1234\" \"1538\" \"1539\" \"1662\" \"1541\" \"1663\" \"1664\" \"1665\" \"1666\" \"1667\" \"1668\" \"1599\" \"1669\" \"1670\" \"1671\" \"1672\" \"1673\" \"1605\" \"1674\" \"1675\" \"1676\" \"1609\" \"1610\" \"1611\" \"1677\" \"1613\" \"1614\" \"1615\" \"1678\" \"1679\" \"1618\" \"1619\" \"1620\" \"1621\" \"1680\" \"1681\" \"1682\" \"1625\" \"1683\" \"1627\" \"1628\" \"1684\" \"1630\" \"1685\" \"1632\" \"1686\" \"1634\" \"1687\" \"1688\" \"1689\" \"1638\" \"1690\" \"1691\" \"1692\" \"1693\"], :id->content {\"1686\" [:div [:p] nil nil [:p/markdown \"Looking at this plot, we could now make a decision, how many dimensions\\n to keep.\"]], \"1684\" [:div [:p] [:div [:p/code {:code \"(defn create-plot-data [ctx ]\\n  (map\\n   #(hash-map :principal-component %1\\n              :cumulative-variance %2)\\n   (range)\\n   (-> ctx vals (nth 2) :fit-result :model bean :cumulativeVarianceProportion)))\", :bg-class \"bg-light\"}]] nil nil], \"1662\" [:div [:p] nil nil [:p/markdown \"The `model` transformer allows to execute all machine learning models.clj\\nwhich register themself inside the `metamorph.ml` system via the function\\n`scicloj.metamorph.ml/define-model!`.\\nThe build in models are listed here:\\nhttps://scicloj.github.io/scicloj.ml/userguide-models.html\\n\\n\"]], \"1688\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit\\n   sonar\\n   (mm/reduce-dimensions :pca-cov 2\\n                         col-names\\n                         {}\\n                         )\\n   (mm/select-columns  [:material \\\"pca-cov-0\\\" \\\"pca-cov-1\\\"])\\n   (mm/shuffle)))\", :bg-class \"bg-light\"}]] nil nil], \"1619\" [:div [:p] nil nil [:p/markdown \"In this example we run PCA on some data.\"]], \"1618\" [:div [:p] nil nil [:p/markdown \"#### PCA example\"]], \"1665\" [:div [:p] [:div [:p/code {:code \"(def train-test\\n  (ds/train-test-split iris))\", :bg-class \"bg-light\"}]] nil nil], \"1654\" [:div [:p] [:div [:p/code {:code \"ctx-sparse\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data _unnamed [2 3]:\\n\\n|                                :text |                                                               :bow |                             :sparse |\\n|--------------------------------------|--------------------------------------------------------------------|-------------------------------------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"clojur\\\" 1, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} | [3:2, 0:1, 9:1, 7:1, 6:1, 2:1, 1:1] |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"clojur\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} |           [6:1, 8:1, 0:1, 4:1, 5:1] |\\n,\\n :metamorph/mode :fit,\\n :scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n {:vocab\\n  (\\\"clojur\\\" \\\"!\\\" \\\"word\\\" \\\"hello\\\" \\\"is\\\" \\\"fun\\\" \\\"ml\\\" \\\",\\\" \\\"with\\\" \\\"world\\\"),\\n  :vocab->index-map\\n  {\\\"clojur\\\" 0,\\n   \\\"!\\\" 1,\\n   \\\"word\\\" 2,\\n   \\\"hello\\\" 3,\\n   \\\"is\\\" 4,\\n   \\\"fun\\\" 5,\\n   \\\"ml\\\" 6,\\n   \\\",\\\" 7,\\n   \\\"with\\\" 8,\\n   \\\"world\\\" 9},\\n  :index->vocab-map\\n  {0 \\\"clojur\\\",\\n   7 \\\",\\\",\\n   1 \\\"!\\\",\\n   4 \\\"is\\\",\\n   6 \\\"ml\\\",\\n   3 \\\"hello\\\",\\n   2 \\\"word\\\",\\n   9 \\\"world\\\",\\n   5 \\\"fun\\\",\\n   8 \\\"with\\\"}}}\\n\"}]], \"1627\" [:div [:p] nil nil [:p/markdown \"The next function transforms the result from the fitted pipeline\\ninto vega lite compatible format for plotting\"]], \"201\" [:div [:p] nil nil [:p/markdown \"_\"]], \"1539\" [:div [:p] nil nil [:p/markdown \"## Transformer **model**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nExecutes a machine learning model in train/predict (depending on :mode)\\n  from the `metamorph.ml` model registry.\\n\\n  The model is passed between both invocation via the shared context ctx in a\\n  key (a step indentifier) which is passed in key `:metamorph/id` and guarantied to be unique for each\\n  pipeline step.\\n\\n  The function writes and reads into this common context key.\\n\\n  Options:\\n  - `:model-type` - Keyword for the model to use\\n\\n  Further options get passed to `train` functions and are model specific.\\n\\n  See here for an overview for the models build into scicloj.ml:\\n\\n  https://scicloj.github.io/scicloj.ml/userguide-models.html\\n\\n  Other libraries might contribute other models,\\n  which are documented as part of the library.\\n\\n\\n  metamorph                            | .\\n  -------------------------------------|----------------------------------------------------------------------------\\n  Behaviour in mode :fit               | Calls `scicloj.metamorph.ml/train` using data in `:metamorph/data` and `options`and stores trained model in ctx under key in `:metamorph/id`\\n  Behaviour in mode :transform         | Reads trained model from ctx and calls `scicloj.metamorph.ml/predict` with the model in $id and data in `:metamorph/data`\\n  Reads keys from ctx                  | In mode `:transform` : Reads trained model to use for prediction from key in `:metamorph/id`.\\n  Writes keys to ctx                   | In mode `:fit` : Stores trained model in key $id and writes feature-ds and target-ds before prediction into ctx at `:scicloj.metamorph.ml/feature-ds` /`:scicloj.metamorph.ml/target-ds`\\n\\n\\n\\n\\n  See as well:\\n\\n  * `scicloj.metamorph.ml/train`\\n  * `scicloj.metamorph.ml/predict`\\n\\n  \\n----------------------------------------------------------\"]], \"1400\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit\\n   data\\n   (mm/count-vectorize\\n    :text :bow\\n    {:text->bow-fn (fn [text options]\\n                     {:a 1 :b 2\\n                      })})))\", :bg-class \"bg-light\"}]] nil nil], \"1630\" [:div [:p] nil nil [:p/markdown \"Next we plot the cumulative variance over the component index:\"]], \"1685\" [:div [:p] [:div [:p/code {:code \"^kind/vega\\n{:$schema \\\"https://vega.github.io/schema/vega-lite/v5.json\\\"\\n :width 850\\n :data {:values\\n        (create-plot-data fitted-ctx)}\\n :mark \\\"line\\\" ,\\n :encoding\\n {:x {:field :principal-component, :type \\\"nominal\\\"},\\n  :y {:field :cumulative-variance, :type \\\"quantitative\\\"}}}\", :bg-class \"bg-light\"}]] nil [:p/vega {:$schema \"https://vega.github.io/schema/vega-lite/v5.json\", :width 850, :data {:values ({:cumulative-variance 0.31971149479250877, :principal-component 0} {:cumulative-variance 0.5235420901653136, :principal-component 1} {:cumulative-variance 0.6091002869590061, :principal-component 2} {:cumulative-variance 0.6736935074186393, :principal-component 3} {:cumulative-variance 0.725335066727316, :principal-component 4} {:cumulative-variance 0.7698490849737343, :principal-component 5} {:cumulative-variance 0.8119260431563502, :principal-component 6} {:cumulative-variance 0.8382525634042723, :principal-component 7} {:cumulative-variance 0.8605529291113191, :principal-component 8} {:cumulative-variance 0.879771101847903, :principal-component 9} {:cumulative-variance 0.8954241908902043, :principal-component 10} {:cumulative-variance 0.909016913098855, :principal-component 11} {:cumulative-variance 0.9207183350160374, :principal-component 12} {:cumulative-variance 0.930286346158442, :principal-component 13} {:cumulative-variance 0.9390195917296513, :principal-component 14} {:cumulative-variance 0.9466845369424247, :principal-component 15} {:cumulative-variance 0.9538789418133944, :principal-component 16} {:cumulative-variance 0.9595348908161602, :principal-component 17} {:cumulative-variance 0.9648080302096571, :principal-component 18} {:cumulative-variance 0.9696892254846439, :principal-component 19} {:cumulative-variance 0.9733482655665951, :principal-component 20} {:cumulative-variance 0.9762822358710562, :principal-component 21} {:cumulative-variance 0.9789613988813191, :principal-component 22} {:cumulative-variance 0.9813613318829019, :principal-component 23} {:cumulative-variance 0.9836817442332522, :principal-component 24} {:cumulative-variance 0.9858406939686831, :principal-component 25} {:cumulative-variance 0.9874044200054725, :principal-component 26} {:cumulative-variance 0.9888093899096736, :principal-component 27} {:cumulative-variance 0.9901071282284587, :principal-component 28} {:cumulative-variance 0.9912911831931172, :principal-component 29} {:cumulative-variance 0.9922583825228618, :principal-component 30} {:cumulative-variance 0.9931676767424223, :principal-component 31} {:cumulative-variance 0.9939288969729646, :principal-component 32} {:cumulative-variance 0.9946525952006342, :principal-component 33} {:cumulative-variance 0.9953526025581715, :principal-component 34} {:cumulative-variance 0.9960040990184553, :principal-component 35} {:cumulative-variance 0.9965519658657541, :principal-component 36} {:cumulative-variance 0.9970772003351906, :principal-component 37} {:cumulative-variance 0.9975647309726664, :principal-component 38} {:cumulative-variance 0.9979689474966706, :principal-component 39} {:cumulative-variance 0.998363453379374, :principal-component 40} {:cumulative-variance 0.9987264255349996, :principal-component 41} {:cumulative-variance 0.9990014209096296, :principal-component 42} {:cumulative-variance 0.9992348810260459, :principal-component 43} {:cumulative-variance 0.9994274362459917, :principal-component 44} {:cumulative-variance 0.9995760342330939, :principal-component 45} {:cumulative-variance 0.9996676745496229, :principal-component 46} {:cumulative-variance 0.9997463658608327, :principal-component 47} {:cumulative-variance 0.9998174151573338, :principal-component 48} {:cumulative-variance 0.9998634738637073, :principal-component 49} {:cumulative-variance 0.9998952776936947, :principal-component 50} {:cumulative-variance 0.9999201078961559, :principal-component 51} {:cumulative-variance 0.9999386690354297, :principal-component 52} {:cumulative-variance 0.9999537982223055, :principal-component 53} {:cumulative-variance 0.9999660718779566, :principal-component 54} {:cumulative-variance 0.9999767241290464, :principal-component 55} {:cumulative-variance 0.999984570529223, :principal-component 56} {:cumulative-variance 0.9999913227770387, :principal-component 57} {:cumulative-variance 0.999996677433683, :principal-component 58} {:cumulative-variance 0.9999999999999998, :principal-component 59})}, :mark \"line\", :encoding {:x {:field :principal-component, :type \"nominal\"}, :y {:field :cumulative-variance, :type \"quantitative\"}}}]], \"1620\" [:div [:p] [:div [:p/code {:code \"(require '[scicloj.metamorph.ml.toydata :as toydata])\", :bg-class \"bg-light\"}]] nil nil], \"1524\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nbow-ds\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"184px\"}} [:p/markdown \"_unnamed [2 2]:\\n\\n|                                :text |                                                 :bow |\\n|--------------------------------------|------------------------------------------------------|\\n| Hello Clojure world, hello ML word ! | {hello 2, clojur 1, world 1, , 1, ml 1, word 1, ! 1} |\\n|               ML with Clojure is fun |                {ml 1, with 1, clojur 1, is 1, fun 1} |\\n\"]]], \"1690\" [:div [:p] [:div [:p/code {:code \"(def scatter-plot-data\\n  (-> fitted-ctx\\n      :metamorph/data\\n      (ds/select-columns [:material \\\"pca-cov-0\\\" \\\"pca-cov-1\\\"])\\n      (ds/rows :as-maps)))\", :bg-class \"bg-light\"}]] nil nil], \"1661\" [:div [:p] [:div [:p/code {:code \"ctx-sparse\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data _unnamed [2 3]:\\n\\n|                                :text |                                                               :bow | :sparse |\\n|--------------------------------------|--------------------------------------------------------------------|---------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"clojur\\\" 1, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} |   [0:2] |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"clojur\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} |   [1:1] |\\n,\\n :metamorph/mode :fit,\\n :scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n {:vocab [\\\"hello\\\" \\\"fun\\\"],\\n  :vocab->index-map {\\\"hello\\\" 0, \\\"fun\\\" 1},\\n  :index->vocab-map {0 \\\"hello\\\", 1 \\\"fun\\\"}}}\\n\"}]], \"1615\" [:div [:p] nil nil [:p/markdown \"The min-max scaler scales columns in a specified interval,\\nby default from -0.5 to 0.5\"]], \"1669\" [:div [:p] nil nil nil], \"1407\" [:div [:p] nil nil [:p/markdown \"We see as well the sparse representation as indices against the vocabulary\\nof the non-zero counts.\"]], \"1687\" [:div [:p] nil nil [:p/markdown \"So our pipeline becomes:\"]], \"1532\" [:div [:p] nil nil [:p/markdown \"Now we convert the bag-of-words map to a sparse array of class\\n `java primitive int array`\\n\"]], \"1610\" [:div [:p] [:div [:p/code {:code \"(def data\\n  (ds/dataset\\n   [\\n    [100 0.001]\\n    [8   0.05]\\n    [50  0.005]\\n    [88  0.07]\\n    [4   0.1]]\\n   {:layout :as-row}))\", :bg-class \"bg-light\"}]] nil nil], \"1611\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\ndata\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"322px\"}} [:p/markdown \":_unnamed [5 2]:\\n\\n|   0 |     1 |\\n|----:|------:|\\n| 100 | 0.001 |\\n|   8 | 0.050 |\\n|  50 | 0.005 |\\n|  88 | 0.070 |\\n|   4 | 0.100 |\\n\"]]], \"1666\" [:div [:p] nil nil [:p/markdown \"The pipeline consists in specifying theinference target,\\n transform target to categorical and the model function\"]], \"1693\" [:div [:p] nil nil [:p/markdown \"It even seems, that the reduction to 2 dimensions removes\\ntoo much information for predicting of the material for any type of model.\"]], \"1667\" [:div [:p] [:div [:p/code {:code \"(def pipe-fn\\n  (ml/pipeline\\n   (mm/set-inference-target :species)\\n   (mm/categorical->number [:species])\\n   {:metamorph/id :model} (mm/model {:model-type :smile.classification/logistic-regression})))\", :bg-class \"bg-light\"}]] nil nil], \"1678\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(ml/pipe-it\\n data\\n (mm/min-max-scale [0 1] {}))\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"322px\"}} [:p/markdown \":_unnamed [5 2]:\\n\\n|           0 |           1 |\\n|------------:|------------:|\\n|  0.50000000 | -0.50000000 |\\n| -0.45833333 | -0.00505051 |\\n| -0.02083333 | -0.45959596 |\\n|  0.37500000 |  0.19696970 |\\n| -0.50000000 |  0.50000000 |\\n\"]]], \"1650\" [:div [:p] [:div [:p/code {:code \"fitted-ctx\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"#:metamorph{:data _unnamed [2 2]:\\n\\n|                                :text |                                                   :bow |\\n|--------------------------------------|--------------------------------------------------------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} |\\n, :mode :fit}\\n\"}]], \"1649\" [:div [:p] [:div [:p/code {:code \"(def bow-ds\\n(:metamorph/data fitted-ctx))\", :bg-class \"bg-light\"}]] nil nil], \"1680\" [:div [:p] [:div [:p/code {:code \"(def sonar\\n  (toydata/sonar-ds))\", :bg-class \"bg-light\"}]] nil nil], \"1676\" [:div [:p] nil nil [:p/markdown \"We can use the std-scale transformer to center and scale data.\"]], \"1614\" [:div [:p] nil nil [:p/markdown \"## Transformer **min-max-scale**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nMetamorph transfomer, which scales the column data into a given range.\\n\\n  `col-seq` is a sequence of columns names to work on\\n\\n  `options` Options for scaler, can take:\\n\\n  `min` Minimal value to scale to (default -0.5)\\n\\n  `max` Maximum value to scale to (default 0.5)\\n\\n  metamorph                            | .\\n  -------------------------------------|----------------------------------------------------------------------------\\n  Behaviour in mode :fit               | Scales the dataset at key `:metamorph/data` and stores the trained model in ctx under key at `:metamorph/id`\\n  Behaviour in mode :transform         | Reads trained min-max-scale model from ctx and applies it to data in `:metamorph/data`\\n  Reads keys from ctx                  | In mode `:transform` : Reads trained model to use for from key in `:metamorph/id`.\\n  Writes keys to ctx                   | In mode `:fit` : Stores trained model in key $id\\n\\n  \\n----------------------------------------------------------\"]], \"296\" [:div [:p] nil nil [:p/markdown \"## Transformer **bow->tfidf**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nCalculates the tfidf score from bag-of-words (as token frequency maps)\\n   in column `bow-column` and stores them in a new column `tfid-column` as maps of token->tfidf-score.\\n\\n\\n  metamorph                            |.\\n  -------------------------------------|---------\\n  Behaviour in mode :fit               |normal\\n  Behaviour in mode :transform         |normal\\n  Reads keys from ctx                  |none\\n  Writes keys to ctx                   |none\\n  \\n----------------------------------------------------------\"]], \"1465\" [:div [:p] nil nil [:p/markdown \"It even seems, that the reduction to 2 dimensions removes\\ntoo much information for predicting of the material for any type of model.\"]], \"1638\" [:div [:p] nil nil [:p/markdown \"As the data is now 2-dimensional, it is easy to plot:\"]], \"1292\" [:div [:p] [:div [:p/code {:code \"(def ctx-sparse\\n  (ml/fit\\n   bow-ds\\n   (mm/bow->sparse-array :bow :sparse)))\", :bg-class \"bg-light\"}]] nil nil], \"1660\" [:div [:p] [:div [:p/code {:code \"(def ctx-sparse\\n  (ml/fit\\n   bow-ds\\n   (mm/bow->SparseArray\\n    :bow :sparse\\n    {:create-vocab-fn\\n     (fn [_]\\n       [\\\"hello\\\" \\\"fun\\\"]\\n       )})))\", :bg-class \"bg-light\"}]] nil nil], \"1621\" [:div [:p] nil nil [:p/markdown \"We use the sonar dataset which has 60 columns of quantitative data,\\nwhich are certain measurements from a sonar device.\\nThe original purpose of the dataset is to learn to detect rock vs metal\\n from the measurements\"]], \"1670\" [:div [:p] [:div [:p/code {:code \"(dissoc-in  fitted-ctx [:model :model-data])\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data\\n https://raw.githubusercontent.com/scicloj/metamorph.ml/main/test/data/iris.csv [105 5]:\\n\\n| :sepal_length | :sepal_width | :petal_length | :petal_width | :species |\\n|--------------:|-------------:|--------------:|-------------:|---------:|\\n|           5.7 |          2.8 |           4.1 |          1.3 |      0.0 |\\n|           6.2 |          2.2 |           4.5 |          1.5 |      0.0 |\\n|           5.5 |          2.4 |           3.8 |          1.1 |      0.0 |\\n|           5.0 |          3.4 |           1.6 |          0.4 |      1.0 |\\n|           6.1 |          3.0 |           4.9 |          1.8 |      2.0 |\\n,\\n :metamorph/mode :fit,\\n :model\\n {:options {:model-type :smile.classification/logistic-regression},\\n  :id #uuid \\\"e297d82a-2aad-4653-a501-62da4359eda7\\\",\\n  :feature-columns\\n  [:sepal_length :sepal_width :petal_length :petal_width],\\n  :target-columns [:species],\\n  :target-categorical-maps\\n  {:species\\n   {:lookup-table {\\\"versicolor\\\" 0, \\\"setosa\\\" 1, \\\"virginica\\\" 2},\\n    :src-column :species,\\n    :result-datatype :float64}}}}\\n\"}]], \"1673\" [:div [:p] [:div [:p/code {:code \"(-> transformed-ctx\\n    (dissoc-in [:model :model-data])\\n    (update-in [:metamorph/data ] #(tech.v3.dataset.print/print-range % 5))\\n    )\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data :_unnamed [45 4]:\\n\\n| versicolor |     setosa |      virginica | :species |\\n|-----------:|-----------:|---------------:|---------:|\\n| 0.14017260 | 0.00002549 | 8.59801913E-01 |      2.0 |\\n| 0.97354391 | 0.00795903 | 1.84970587E-02 |      0.0 |\\n| 0.00929567 | 0.99070433 | 1.05376535E-10 |      1.0 |\\n| 0.00794571 | 0.99205429 | 1.04470963E-10 |      1.0 |\\n| 0.13660662 | 0.00000051 | 8.63392872E-01 |      2.0 |\\n,\\n :metamorph/mode :transform,\\n :model\\n {:options {:model-type :smile.classification/logistic-regression},\\n  :id #uuid \\\"e297d82a-2aad-4653-a501-62da4359eda7\\\",\\n  :feature-columns\\n  [:sepal_length :sepal_width :petal_length :petal_width],\\n  :target-columns [:species],\\n  :target-categorical-maps\\n  {:species\\n   {:lookup-table {\\\"versicolor\\\" 0, \\\"setosa\\\" 1, \\\"virginica\\\" 2},\\n    :src-column :species,\\n    :result-datatype :float64}}},\\n :scicloj.metamorph.ml/feature-ds\\n https://raw.githubusercontent.com/scicloj/metamorph.ml/main/test/data/iris.csv [45 4]:\\n\\n| :sepal_length | :sepal_width | :petal_length | :petal_width |\\n|--------------:|-------------:|--------------:|-------------:|\\n|           6.3 |          2.5 |           5.0 |          1.9 |\\n|           5.7 |          3.0 |           4.2 |          1.2 |\\n|           4.8 |          3.0 |           1.4 |          0.1 |\\n|           5.0 |          3.4 |           1.5 |          0.2 |\\n|           7.2 |          3.0 |           5.8 |          1.6 |\\n,\\n :scicloj.metamorph.ml/target-ds\\n https://raw.githubusercontent.com/scicloj/metamorph.ml/main/test/data/iris.csv [45 1]:\\n\\n| :species |\\n|---------:|\\n|      2.0 |\\n|      0.0 |\\n|      1.0 |\\n|      1.0 |\\n|      2.0 |\\n}\\n\"}]], \"1643\" [:div [:p] [:div [:p/code {:code \"(comment\\n\\n  (note/init-with-browser)\\n  (notespace.api/update-config\\n   #(assoc % :source-base-path \\\"userguide\\\"))\\n  (note/eval-this-notespace)\\n  (note/render-static-html \\\"docs/userguide-transformers.html\\\")\\n  )\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"nil\\n\"}]], \"1521\" [:div [:p] nil nil [:p/markdown \"## Transformer **count-vectorize**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nTransforms the text column `text-col` into a map of token frequencies in column\\n  `bow-col`\\n\\n  `options` can be any of\\n\\n  `text->bow-fn` A functions which takes as input a\\n\\n  metamorph                            |.\\n  -------------------------------------|---------\\n  Behaviour in mode :fit               |normal\\n  Behaviour in mode :transform         |normal\\n  Reads keys from ctx                  |none\\n  Writes keys to ctx                   |none\\n  \\n----------------------------------------------------------\"]], \"1634\" [:div [:p] nil nil [:p/markdown \"We could for example decide, that keeping 60 % of the variance\\nis enough, which would result in keeping the first 2 dimensions.\"]], \"1655\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(:metamorph/data ctx-sparse)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"184px\"}} [:p/markdown \"_unnamed [2 3]:\\n\\n|                                :text |                                                 :bow |                             :sparse |\\n|--------------------------------------|------------------------------------------------------|-------------------------------------|\\n| Hello Clojure world, hello ML word ! | {hello 2, clojur 1, world 1, , 1, ml 1, word 1, ! 1} | [3:2, 0:1, 9:1, 7:1, 6:1, 2:1, 1:1] |\\n|               ML with Clojure is fun |                {ml 1, with 1, clojur 1, is 1, fun 1} |           [6:1, 8:1, 0:1, 4:1, 5:1] |\\n\"]]], \"1658\" [:div [:p] [:div [:p/code {:code \"ctx-sparse\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data _unnamed [2 3]:\\n\\n|                                :text |                                                               :bow |     :sparse |\\n|--------------------------------------|--------------------------------------------------------------------|-------------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"clojur\\\" 1, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} | [I@6c7c9cc0 |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"clojur\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} | [I@45577af0 |\\n,\\n :metamorph/mode :fit,\\n :scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n {:vocab\\n  (\\\"clojur\\\" \\\"!\\\" \\\"word\\\" \\\"hello\\\" \\\"is\\\" \\\"fun\\\" \\\"ml\\\" \\\",\\\" \\\"with\\\" \\\"world\\\"),\\n  :vocab->index-map\\n  {\\\"clojur\\\" 0,\\n   \\\"!\\\" 1,\\n   \\\"word\\\" 2,\\n   \\\"hello\\\" 3,\\n   \\\"is\\\" 4,\\n   \\\"fun\\\" 5,\\n   \\\"ml\\\" 6,\\n   \\\",\\\" 7,\\n   \\\"with\\\" 8,\\n   \\\"world\\\" 9},\\n  :index->vocab-map\\n  {0 \\\"clojur\\\",\\n   7 \\\",\\\",\\n   1 \\\"!\\\",\\n   4 \\\"is\\\",\\n   6 \\\"ml\\\",\\n   3 \\\"hello\\\",\\n   2 \\\"word\\\",\\n   9 \\\"world\\\",\\n   5 \\\"fun\\\",\\n   8 \\\"with\\\"}}}\\n\"}]], \"1229\" [:div [:p] nil nil [:p/markdown \"In both ->sparse function we can control the vocabulary via\\nthe option to pass in a different / custom functions which creates\\nthe vocabulary from the bow maps.\"]], \"1668\" [:div [:p] nil nil [:p/markdown \"First we run the training \"]], \"1625\" [:div [:p] nil nil [:p/markdown \"First we create and run  a pipeline which does the PCA.\\nIn this pipeline we do not fix the number of columns, as we want to\\nplot the result for all numbers of components (up to 60) \"]], \"601\" [:div [:p] nil nil [:p/markdown \"or passing in a implementation of a tokenizer function\"]], \"1663\" [:div [:p] [:div [:p/code {:code \"(def iris\\n  (->\\n   (ds/dataset\\n    \\\"https://raw.githubusercontent.com/scicloj/metamorph.ml/main/test/data/iris.csv\\\" {:key-fn keyword})\\n   (tech.v3.dataset.print/print-range 5)\\n   )\\n  )\", :bg-class \"bg-light\"}]] nil nil], \"1531\" [:div [:p] nil nil [:p/markdown \"## Transformer **bow->sparse-array**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nConverts a bag-of-word column `bow-col` to sparse indices column\\n  `indices-col`,   as needed by the Maxent model.\\n  `Options` can be of:\\n\\n  `create-vocab-fn` A function which converts the bow map to a list of tokens.\\n                    Defaults to scicloj.ml.smile.nlp/create-vocab-all\\n\\n\\n  The sparse data is represented as `primitive int arrays`,\\n  of which entries are the indices against the vocabulary\\n  of the present tokens.\\n\\n  metamorph                            |.\\n  -------------------------------------|---------\\n  Behaviour in mode :fit               |normal\\n  Behaviour in mode :transform         |normal\\n  Reads keys from ctx                  |none\\n  Writes keys to ctx                   |:scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n\\n  \\n----------------------------------------------------------\"]], \"1632\" [:div [:p] nil nil [:p/markdown \"From the plot we see, that transforming the data via PCA and reducing\\nit from 60 dimensions to about 25 would still preserve the full variance.\"]], \"651\" [:div [:p] nil nil [:p/markdown \"Now we convert the bag-of-words map to a sparse array of class\\n `smile.util.SparseArray`\\n\\n\"]], \"1651\" [:div [:p] [:div [:p/code {:code \"fitted-ctx\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"#:metamorph{:data _unnamed [2 2]:\\n\\n|                                :text |         :bow |\\n|--------------------------------------|--------------|\\n| Hello Clojure world, hello ML word ! | {:a 1, :b 2} |\\n|               ML with Clojure is fun | {:a 1, :b 2} |\\n, :mode :fit}\\n\"}]], \"1648\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit data\\n          (mm/count-vectorize :text :bow)))\", :bg-class \"bg-light\"}]] nil nil], \"1525\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit\\n   data\\n   (mm/count-vectorize :text :bow {:stopwords [\\\"clojure\\\"]\\n                                   :stemmer :none\\n                                   })))\", :bg-class \"bg-light\"}]] nil nil], \"1523\" [:div [:p] [:div [:p/code {:code \"fitted-ctx\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"#:metamorph{:data _unnamed [2 2]:\\n\\n|                                :text |                                                               :bow |\\n|--------------------------------------|--------------------------------------------------------------------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"clojur\\\" 1, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"clojur\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} |\\n, :mode :fit}\\n\"}]], \"1599\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit\\n   (:train-ds train-test)\\n   pipe-fn\\n   ))\", :bg-class \"bg-light\"}]] nil nil], \"1691\" [:div [:p] [:div [:p/code {:code \"^kind/vega\\n{:$schema \\\"https://vega.github.io/schema/vega-lite/v5.json\\\"\\n :data {:values scatter-plot-data}\\n :width 500\\n :height 500\\n\\n :mark :circle\\n :encoding\\n {:x {:field \\\"pca-cov-0\\\"  :type \\\"quantitative\\\"}\\n  :y {:field \\\"pca-cov-1\\\"  :type \\\"quantitative\\\"}\\n  :color {:field :material}}}\", :bg-class \"bg-light\"}]] nil [:p/vega {:$schema \"https://vega.github.io/schema/vega-lite/v5.json\", :data {:values [{:material \"M\", \"pca-cov-0\" -0.21914885793991068, \"pca-cov-1\" -1.1538074545824804} {:material \"M\", \"pca-cov-0\" -0.6749962305047714, \"pca-cov-1\" 1.4817762706943431} {:material \"R\", \"pca-cov-0\" 0.3386153125517574, \"pca-cov-1\" -0.0931539750564166} {:material \"M\", \"pca-cov-0\" 0.6869534668770336, \"pca-cov-1\" -0.6867474240436393} {:material \"R\", \"pca-cov-0\" 0.7185451707436292, \"pca-cov-1\" 0.39356258444189507} {:material \"R\", \"pca-cov-0\" -0.6005074355254325, \"pca-cov-1\" -0.19943256713846746} {:material \"M\", \"pca-cov-0\" 0.3308371727635356, \"pca-cov-1\" -0.9548453383227284} {:material \"M\", \"pca-cov-0\" 0.39413140629285887, \"pca-cov-1\" 0.03889118737056449} {:material \"R\", \"pca-cov-0\" 0.23467346641774695, \"pca-cov-1\" 0.3652086317375566} {:material \"R\", \"pca-cov-0\" -1.1171074187843704, \"pca-cov-1\" -0.5411501625400246} {:material \"M\", \"pca-cov-0\" 0.5551962404949851, \"pca-cov-1\" 0.5598144799584606} {:material \"M\", \"pca-cov-0\" 0.28088718479110836, \"pca-cov-1\" 0.2821382748118007} {:material \"M\", \"pca-cov-0\" -0.13058541732793075, \"pca-cov-1\" -0.8996889893245701} {:material \"M\", \"pca-cov-0\" 0.8154007367002547, \"pca-cov-1\" 1.2083269722552155} {:material \"R\", \"pca-cov-0\" 1.2293676455454807, \"pca-cov-1\" -0.2766687183404906} {:material \"M\", \"pca-cov-0\" -0.24285545658974822, \"pca-cov-1\" -0.05600851217140751} {:material \"R\", \"pca-cov-0\" -0.9562353845571867, \"pca-cov-1\" 0.4033628244019578} {:material \"R\", \"pca-cov-0\" -0.8818604350820554, \"pca-cov-1\" 0.38984988619302485} {:material \"M\", \"pca-cov-0\" -0.8878273198198166, \"pca-cov-1\" 1.1552221378030383} {:material \"R\", \"pca-cov-0\" -0.22626634304414178, \"pca-cov-1\" -0.6849714814130017} {:material \"M\", \"pca-cov-0\" -1.5747242620406305, \"pca-cov-1\" -0.008997613971477969} {:material \"R\", \"pca-cov-0\" 0.419052302148283, \"pca-cov-1\" 0.17147989141914777} {:material \"M\", \"pca-cov-0\" 1.3142106792715, \"pca-cov-1\" 1.0702086409592704} {:material \"M\", \"pca-cov-0\" -0.37420424084649817, \"pca-cov-1\" -0.12177948424810997} {:material \"M\", \"pca-cov-0\" 0.9119606410861045, \"pca-cov-1\" 1.3755342076072945} {:material \"R\", \"pca-cov-0\" 0.9763544452136184, \"pca-cov-1\" 0.24800551621143258} {:material \"M\", \"pca-cov-0\" 0.023937902173329473, \"pca-cov-1\" 0.31762410498444194} {:material \"M\", \"pca-cov-0\" 0.013290778903050804, \"pca-cov-1\" -0.6103426976789785} {:material \"R\", \"pca-cov-0\" -0.1619613430448013, \"pca-cov-1\" -0.6672495684312849} {:material \"R\", \"pca-cov-0\" -1.0522334331530276, \"pca-cov-1\" -0.22769680190393976} {:material \"R\", \"pca-cov-0\" -0.4608848505387918, \"pca-cov-1\" -0.5157155737972035} {:material \"M\", \"pca-cov-0\" 1.0611696069658763, \"pca-cov-1\" 0.1666602532341761} {:material \"R\", \"pca-cov-0\" -0.29609341504368625, \"pca-cov-1\" -0.6323352987444024} {:material \"M\", \"pca-cov-0\" 0.8394685420707475, \"pca-cov-1\" -0.34296775295258247} {:material \"M\", \"pca-cov-0\" -1.1157052015237723, \"pca-cov-1\" 0.1069696086288526} {:material \"M\", \"pca-cov-0\" 0.13186023960662369, \"pca-cov-1\" -0.3174389132862275} {:material \"R\", \"pca-cov-0\" -0.05161197328526301, \"pca-cov-1\" 0.19279682216163063} {:material \"R\", \"pca-cov-0\" -0.45270845142641986, \"pca-cov-1\" -0.46280013823116267} {:material \"R\", \"pca-cov-0\" -0.6695589953543184, \"pca-cov-1\" -0.1954356678970951} {:material \"M\", \"pca-cov-0\" 0.7647946249010278, \"pca-cov-1\" 0.5167565445950892} {:material \"M\", \"pca-cov-0\" -0.5316628144745317, \"pca-cov-1\" -0.41260104713600326} {:material \"R\", \"pca-cov-0\" -0.7012290104235233, \"pca-cov-1\" 0.34599364357753604} {:material \"R\", \"pca-cov-0\" -0.5503369884793633, \"pca-cov-1\" -0.5232706337415147} {:material \"M\", \"pca-cov-0\" 0.8735117150395482, \"pca-cov-1\" -0.4720191007021492} {:material \"R\", \"pca-cov-0\" 0.9706673571016695, \"pca-cov-1\" 1.0180392438088373} {:material \"R\", \"pca-cov-0\" -0.7681563161220025, \"pca-cov-1\" -0.1227023728669821} {:material \"M\", \"pca-cov-0\" 0.046613720249120194, \"pca-cov-1\" 0.13532529304426286} {:material \"R\", \"pca-cov-0\" -1.0943305545602549, \"pca-cov-1\" 0.7027342387557258} {:material \"M\", \"pca-cov-0\" -0.8433202717628021, \"pca-cov-1\" 1.4555862406503755} {:material \"M\", \"pca-cov-0\" -0.6659706271401359, \"pca-cov-1\" 0.030562536586775324} {:material \"R\", \"pca-cov-0\" -0.31464370814570347, \"pca-cov-1\" -0.6573081544491415} {:material \"R\", \"pca-cov-0\" 1.0122622536727601, \"pca-cov-1\" 0.4379544097242176} {:material \"R\", \"pca-cov-0\" 0.5675439628915364, \"pca-cov-1\" 0.2487534401795547} {:material \"M\", \"pca-cov-0\" -1.3037814884870433, \"pca-cov-1\" -0.27461417928786763} {:material \"M\", \"pca-cov-0\" 0.375732267961806, \"pca-cov-1\" -0.10318035292234379} {:material \"R\", \"pca-cov-0\" 0.9146838733774907, \"pca-cov-1\" 0.13531135346141485} {:material \"R\", \"pca-cov-0\" 0.9566857080582527, \"pca-cov-1\" 0.2689412980582911} {:material \"R\", \"pca-cov-0\" 0.29372891199876666, \"pca-cov-1\" -0.2695426506606127} {:material \"M\", \"pca-cov-0\" 1.017757163121475, \"pca-cov-1\" -0.4873583350352149} {:material \"R\", \"pca-cov-0\" -1.116022279686207, \"pca-cov-1\" -0.4657679526439464} {:material \"M\", \"pca-cov-0\" -0.0736181469499097, \"pca-cov-1\" 0.41135462596660566} {:material \"M\", \"pca-cov-0\" 0.7266090728038888, \"pca-cov-1\" 0.4180887500366576} {:material \"M\", \"pca-cov-0\" -0.14751166390612147, \"pca-cov-1\" -0.17759736179854124} {:material \"R\", \"pca-cov-0\" -0.1328841349720351, \"pca-cov-1\" -0.19703127372105567} {:material \"R\", \"pca-cov-0\" -0.05056070031045465, \"pca-cov-1\" -0.6875920287783674} {:material \"R\", \"pca-cov-0\" 0.18357836760779966, \"pca-cov-1\" -1.011675678607664} {:material \"M\", \"pca-cov-0\" 0.09445630286822843, \"pca-cov-1\" -0.06585310801103667} {:material \"M\", \"pca-cov-0\" 0.3661770598635929, \"pca-cov-1\" -0.9121422567519688} {:material \"R\", \"pca-cov-0\" -1.6131320348613285, \"pca-cov-1\" 1.064936545085883} {:material \"R\", \"pca-cov-0\" 0.3398471890073627, \"pca-cov-1\" -0.43756423373451053} {:material \"M\", \"pca-cov-0\" 1.0123928040074481, \"pca-cov-1\" 1.2637341097332684} {:material \"R\", \"pca-cov-0\" -1.0665190002292073, \"pca-cov-1\" 1.3644265203491626} {:material \"M\", \"pca-cov-0\" 0.8457982521906666, \"pca-cov-1\" 0.6071518077656564} {:material \"M\", \"pca-cov-0\" 0.16023915287137758, \"pca-cov-1\" -0.35136683026422905} {:material \"R\", \"pca-cov-0\" -0.21002333207063617, \"pca-cov-1\" -0.24949758807312722} {:material \"M\", \"pca-cov-0\" 0.8944308974283286, \"pca-cov-1\" 0.4401681152853494} {:material \"M\", \"pca-cov-0\" 0.7979867159049683, \"pca-cov-1\" 0.5181677097900093} {:material \"M\", \"pca-cov-0\" -0.2841030579171579, \"pca-cov-1\" -0.45966114191331037} {:material \"M\", \"pca-cov-0\" 0.40429731749818804, \"pca-cov-1\" -0.26845706667683017} {:material \"R\", \"pca-cov-0\" -0.8366418812939544, \"pca-cov-1\" -0.09673199167290436} {:material \"M\", \"pca-cov-0\" 0.051114557997456844, \"pca-cov-1\" -0.9125262738604061} {:material \"R\", \"pca-cov-0\" -0.4870998390048321, \"pca-cov-1\" -0.21210984368143493} {:material \"R\", \"pca-cov-0\" 0.39137173826520394, \"pca-cov-1\" 0.6235221698229829} {:material \"M\", \"pca-cov-0\" 1.1394374339170283, \"pca-cov-1\" 0.6059085259471102} {:material \"M\", \"pca-cov-0\" 0.81660148255509, \"pca-cov-1\" 0.965709606465319} {:material \"M\", \"pca-cov-0\" -0.2991868716934264, \"pca-cov-1\" -0.6503808887299687} {:material \"R\", \"pca-cov-0\" -0.4926940242114485, \"pca-cov-1\" 0.4809414374706134} {:material \"R\", \"pca-cov-0\" 0.13969334395492583, \"pca-cov-1\" 0.2387992340849475} {:material \"R\", \"pca-cov-0\" 1.1275021841329433, \"pca-cov-1\" -0.23398180358641646} {:material \"R\", \"pca-cov-0\" -1.662707047260395, \"pca-cov-1\" 0.8610669395093695} {:material \"M\", \"pca-cov-0\" -0.3595489885690596, \"pca-cov-1\" -0.6643078317533617} {:material \"M\", \"pca-cov-0\" -0.697739832378317, \"pca-cov-1\" 0.08719485865090607} {:material \"R\", \"pca-cov-0\" -0.4232805439514561, \"pca-cov-1\" 0.053140137896959094} {:material \"M\", \"pca-cov-0\" 1.0899761713794214, \"pca-cov-1\" 0.5477565416219576} {:material \"R\", \"pca-cov-0\" -0.1568372147437272, \"pca-cov-1\" 0.04119526664273079} {:material \"M\", \"pca-cov-0\" -0.1626510106262674, \"pca-cov-1\" -0.365385333479263} {:material \"R\", \"pca-cov-0\" 0.2967828472790705, \"pca-cov-1\" 0.14011815799868027} {:material \"M\", \"pca-cov-0\" -0.5225276643596347, \"pca-cov-1\" 0.16721201404003821} {:material \"M\", \"pca-cov-0\" -1.3844347433711655, \"pca-cov-1\" 0.2730793050079699} {:material \"R\", \"pca-cov-0\" -0.12451345360574606, \"pca-cov-1\" -0.5972068345965449} {:material \"R\", \"pca-cov-0\" -0.23274053149696045, \"pca-cov-1\" 0.845217906407834} {:material \"R\", \"pca-cov-0\" -0.12014371691775022, \"pca-cov-1\" -0.5343646708813201} {:material \"M\", \"pca-cov-0\" 0.9716829580714885, \"pca-cov-1\" -0.05486356222621436} {:material \"R\", \"pca-cov-0\" -1.7048008052895143, \"pca-cov-1\" 0.6544890234969654} {:material \"M\", \"pca-cov-0\" -0.3644528974563903, \"pca-cov-1\" -0.23663213961672597} {:material \"R\", \"pca-cov-0\" 0.06261631664201256, \"pca-cov-1\" 0.40179454957456284} {:material \"M\", \"pca-cov-0\" 0.4291429862713045, \"pca-cov-1\" -0.8812319958014387} {:material \"M\", \"pca-cov-0\" 0.8974153964965013, \"pca-cov-1\" -0.48939573090842864} {:material \"R\", \"pca-cov-0\" -0.12364032261144284, \"pca-cov-1\" -0.6462862241930052} {:material \"M\", \"pca-cov-0\" 0.5311632506691986, \"pca-cov-1\" -0.8324193252102678} {:material \"R\", \"pca-cov-0\" 0.1089160030676884, \"pca-cov-1\" -0.26262606993198173} {:material \"M\", \"pca-cov-0\" -0.25198153306458704, \"pca-cov-1\" -0.6115323251577494} {:material \"M\", \"pca-cov-0\" 1.4008863663758562, \"pca-cov-1\" 0.42477773512826933} {:material \"R\", \"pca-cov-0\" -0.7121887141451237, \"pca-cov-1\" -0.810713555814754} {:material \"R\", \"pca-cov-0\" -0.6116107669596746, \"pca-cov-1\" 0.17626803911562106} {:material \"R\", \"pca-cov-0\" 1.3487518357168833, \"pca-cov-1\" 0.6444349514030069} {:material \"R\", \"pca-cov-0\" -0.8239605990942174, \"pca-cov-1\" -0.2226334383740441} {:material \"R\", \"pca-cov-0\" -1.6274598276478687, \"pca-cov-1\" 0.8352222453163363} {:material \"M\", \"pca-cov-0\" 0.31520459875824064, \"pca-cov-1\" -0.9297159607857126} {:material \"M\", \"pca-cov-0\" 1.1661686361401205, \"pca-cov-1\" -0.10277944546225226} {:material \"R\", \"pca-cov-0\" -0.11410315487870645, \"pca-cov-1\" -0.7414347924600933} {:material \"M\", \"pca-cov-0\" 0.32905463938965146, \"pca-cov-1\" -0.0063358516089622174} {:material \"R\", \"pca-cov-0\" 0.9401072279346414, \"pca-cov-1\" -0.32457915487509365} {:material \"M\", \"pca-cov-0\" -0.8119442722515346, \"pca-cov-1\" 1.3610127158339391} {:material \"M\", \"pca-cov-0\" -0.6657497759130637, \"pca-cov-1\" 1.4010320248041883} {:material \"M\", \"pca-cov-0\" -1.331711318509011, \"pca-cov-1\" -0.37036239393074016} {:material \"R\", \"pca-cov-0\" 0.38337484936135663, \"pca-cov-1\" -0.07355381799773791} {:material \"M\", \"pca-cov-0\" -0.29773311072121217, \"pca-cov-1\" -1.1518598824859645} {:material \"M\", \"pca-cov-0\" 0.8727775826866455, \"pca-cov-1\" 0.36661593582235} {:material \"R\", \"pca-cov-0\" 1.2771258552922176, \"pca-cov-1\" -0.24039509799060071} {:material \"M\", \"pca-cov-0\" 1.4028931830319555, \"pca-cov-1\" 0.25979893142676536} {:material \"R\", \"pca-cov-0\" 1.155820463456367, \"pca-cov-1\" -0.27656584779987653} {:material \"R\", \"pca-cov-0\" 0.3258867890281873, \"pca-cov-1\" 0.8742085672217756} {:material \"R\", \"pca-cov-0\" 0.1539902863532745, \"pca-cov-1\" -0.28688975623490304} {:material \"M\", \"pca-cov-0\" 0.5397258580115911, \"pca-cov-1\" -0.8550368568651603} {:material \"M\", \"pca-cov-0\" -0.2279071055519237, \"pca-cov-1\" -0.7497101865021316} {:material \"R\", \"pca-cov-0\" -0.3904363212452391, \"pca-cov-1\" -0.6969701639699071} {:material \"R\", \"pca-cov-0\" 0.19979173218390478, \"pca-cov-1\" -0.7275569880195834} {:material \"M\", \"pca-cov-0\" -0.20034003357070257, \"pca-cov-1\" 0.2990388202263876} {:material \"M\", \"pca-cov-0\" 0.98249006643535, \"pca-cov-1\" 1.1816674255966124} {:material \"R\", \"pca-cov-0\" -1.2724980890983915, \"pca-cov-1\" 0.6268386581642492} {:material \"R\", \"pca-cov-0\" -0.7065431876101358, \"pca-cov-1\" -0.6860302580890636} {:material \"M\", \"pca-cov-0\" -1.5282884373543508, \"pca-cov-1\" -0.02195850696812679} {:material \"M\", \"pca-cov-0\" 0.6681161328359413, \"pca-cov-1\" -0.15808225721247732} {:material \"M\", \"pca-cov-0\" -0.048099241760061834, \"pca-cov-1\" -0.2888442762995918} {:material \"M\", \"pca-cov-0\" 0.5370796872561929, \"pca-cov-1\" -0.32816553288398315} {:material \"M\", \"pca-cov-0\" 0.8888179448483897, \"pca-cov-1\" 0.715023479538717} {:material \"R\", \"pca-cov-0\" -0.6882428055585184, \"pca-cov-1\" -0.3313758944140089} {:material \"M\", \"pca-cov-0\" -0.38601636531509026, \"pca-cov-1\" 0.4497296318624451} {:material \"R\", \"pca-cov-0\" 0.8778009860185696, \"pca-cov-1\" 0.11696335784981554} {:material \"M\", \"pca-cov-0\" -0.8438511492831635, \"pca-cov-1\" -0.06389584271681498} {:material \"R\", \"pca-cov-0\" 0.08972320130017236, \"pca-cov-1\" -0.4247201236975325} {:material \"M\", \"pca-cov-0\" -0.8887531897006238, \"pca-cov-1\" 0.34078832906346584} {:material \"R\", \"pca-cov-0\" -0.4034943410238024, \"pca-cov-1\" -0.36143669829704833} {:material \"R\", \"pca-cov-0\" 0.26928702489998285, \"pca-cov-1\" 0.9210462922317595} {:material \"M\", \"pca-cov-0\" -0.4732115476844847, \"pca-cov-1\" -0.010671545090953583} {:material \"M\", \"pca-cov-0\" 0.49464049220437395, \"pca-cov-1\" -0.5976206218869591} {:material \"M\", \"pca-cov-0\" -0.4757851759572047, \"pca-cov-1\" -0.5798699114357699} {:material \"M\", \"pca-cov-0\" -0.2668175070608287, \"pca-cov-1\" -0.7411544278319069} {:material \"R\", \"pca-cov-0\" -0.04405800587984263, \"pca-cov-1\" -0.7942945416010774} {:material \"R\", \"pca-cov-0\" 0.6062902555803897, \"pca-cov-1\" -0.04728685873568805} {:material \"R\", \"pca-cov-0\" -0.5760925244471817, \"pca-cov-1\" 0.3193929288752002} {:material \"M\", \"pca-cov-0\" 0.04576078491712582, \"pca-cov-1\" -0.9959695539272075} {:material \"M\", \"pca-cov-0\" 0.7863180331069859, \"pca-cov-1\" -0.37264745405013405} {:material \"M\", \"pca-cov-0\" -0.7921636386964359, \"pca-cov-1\" 0.6709193713565248} {:material \"M\", \"pca-cov-0\" 0.33202860301834664, \"pca-cov-1\" -0.4024265794186998} {:material \"M\", \"pca-cov-0\" 0.74806769801308, \"pca-cov-1\" -0.0488140806216526} {:material \"R\", \"pca-cov-0\" 0.6083168745551326, \"pca-cov-1\" 0.8988965103292283} {:material \"R\", \"pca-cov-0\" 0.15748388352906384, \"pca-cov-1\" 0.3956682028905505} {:material \"M\", \"pca-cov-0\" 0.8056321439007967, \"pca-cov-1\" 0.5115758632650735} {:material \"R\", \"pca-cov-0\" 1.0652410611281313, \"pca-cov-1\" 0.35874375312331047} {:material \"M\", \"pca-cov-0\" 1.3873156681429224, \"pca-cov-1\" 0.46017235571278925} {:material \"M\", \"pca-cov-0\" -0.4975726904497737, \"pca-cov-1\" -0.041514217452520374} {:material \"M\", \"pca-cov-0\" -0.2917913072804661, \"pca-cov-1\" -0.3360088887703038} {:material \"R\", \"pca-cov-0\" 1.042595313675037, \"pca-cov-1\" -0.47114465847900294} {:material \"R\", \"pca-cov-0\" -0.8491589495103868, \"pca-cov-1\" 0.3894918072133822} {:material \"R\", \"pca-cov-0\" -0.7161679219460846, \"pca-cov-1\" -0.5594705023312521} {:material \"M\", \"pca-cov-0\" -0.42172458574750926, \"pca-cov-1\" 0.004610040123465053} {:material \"R\", \"pca-cov-0\" -0.26603629913590826, \"pca-cov-1\" -0.6271573089654712} {:material \"R\", \"pca-cov-0\" 0.672958335281443, \"pca-cov-1\" 0.5627402993384574} {:material \"R\", \"pca-cov-0\" -0.9934318287353621, \"pca-cov-1\" 0.12117011798199517} {:material \"R\", \"pca-cov-0\" 0.12727589589218669, \"pca-cov-1\" 0.28660897518730827} {:material \"M\", \"pca-cov-0\" 0.5039406642475133, \"pca-cov-1\" -0.9420443911311254} {:material \"R\", \"pca-cov-0\" 0.1265862309811044, \"pca-cov-1\" 0.49437376348442097} {:material \"M\", \"pca-cov-0\" -0.04178148676276669, \"pca-cov-1\" -1.0316439143097806} {:material \"M\", \"pca-cov-0\" -1.524709701642341, \"pca-cov-1\" 0.07391136803675352} {:material \"M\", \"pca-cov-0\" 0.36976121357014774, \"pca-cov-1\" -0.1729127591442992} {:material \"M\", \"pca-cov-0\" 1.08315760557467, \"pca-cov-1\" 0.16941616006945842} {:material \"M\", \"pca-cov-0\" 1.020208549233642, \"pca-cov-1\" -0.11890245052979626} {:material \"R\", \"pca-cov-0\" -0.8520352418947739, \"pca-cov-1\" 0.6908625375933913} {:material \"M\", \"pca-cov-0\" -0.492060059460403, \"pca-cov-1\" 1.2508701469877732} {:material \"R\", \"pca-cov-0\" -0.3051251563397405, \"pca-cov-1\" -0.6842525864180042} {:material \"M\", \"pca-cov-0\" -0.0853763355030043, \"pca-cov-1\" -0.9647104499342714} {:material \"R\", \"pca-cov-0\" 0.9411288648333531, \"pca-cov-1\" 0.22913851556705567} {:material \"M\", \"pca-cov-0\" -0.2755946526481288, \"pca-cov-1\" -0.17427651040974856} {:material \"R\", \"pca-cov-0\" -0.37462066579967945, \"pca-cov-1\" 0.022334408574108233} {:material \"M\", \"pca-cov-0\" 0.1440739144135213, \"pca-cov-1\" 0.09454167048032705} {:material \"M\", \"pca-cov-0\" -0.41597514589891404, \"pca-cov-1\" -0.7352029346750024} {:material \"R\", \"pca-cov-0\" 0.06475554508902975, \"pca-cov-1\" 0.222967780927322} {:material \"M\", \"pca-cov-0\" -0.12529198427713453, \"pca-cov-1\" -0.4427159663541585} {:material \"M\", \"pca-cov-0\" -0.8401781028497368, \"pca-cov-1\" -0.04792029304104228} {:material \"M\", \"pca-cov-0\" 0.2921580306630482, \"pca-cov-1\" -0.2188814840296961} {:material \"R\", \"pca-cov-0\" -1.5926431767553777, \"pca-cov-1\" 1.196254724405631} {:material \"M\", \"pca-cov-0\" -0.6042137565370842, \"pca-cov-1\" -0.14958958521906573} {:material \"R\", \"pca-cov-0\" -1.533880273576329, \"pca-cov-1\" 0.40517566820421214} {:material \"M\", \"pca-cov-0\" 0.8338213176765115, \"pca-cov-1\" -0.4505905142902345} {:material \"R\", \"pca-cov-0\" 0.5586959502370221, \"pca-cov-1\" 0.8219663744039716} {:material \"M\", \"pca-cov-0\" 0.4387228689840695, \"pca-cov-1\" 0.5844830182753706}]}, :width 500, :height 500, :mark :circle, :encoding {:x {:field \"pca-cov-0\", :type \"quantitative\"}, :y {:field \"pca-cov-1\", :type \"quantitative\"}, :color {:field :material}}}]], \"1234\" [:div [:p] nil nil [:p/markdown \"Here we calculate the tf-idf score from the bag of words:\"]], \"1657\" [:div [:p] [:div [:p/code {:code \"(zipmap\\n (:text bow-ds)\\n (map seq\\n      (-> ctx-sparse :metamorph/data :sparse)))\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{\\\"Hello Clojure world, hello ML word !\\\"\\n (#object[smile.util.SparseArray$Entry 0x2c47b899 \\\"3:2\\\"]\\n  #object[smile.util.SparseArray$Entry 0x310d1964 \\\"0:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x7d588970 \\\"9:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x49df1737 \\\"7:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x7bcd8455 \\\"6:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x22d27471 \\\"2:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x1b787a52 \\\"1:1\\\"]),\\n \\\"ML with Clojure is fun\\\"\\n (#object[smile.util.SparseArray$Entry 0x2aafb0a5 \\\"6:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x63eb4a75 \\\"8:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x34b31f22 \\\"0:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x1af04022 \\\"4:1\\\"]\\n  #object[smile.util.SparseArray$Entry 0x67bd4a86 \\\"5:1\\\"])}\\n\"}]], \"1671\" [:div [:p] nil nil [:p/markdown \"and then prediction on test\"]], \"1295\" [:div [:p] [:div [:p/code {:code \"(zipmap\\n (:text bow-ds)\\n (map seq\\n      (-> ctx-sparse :metamorph/data :sparse)))\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{\\\"Hello Clojure world, hello ML word !\\\" (0 1 2 3 6 7 9),\\n \\\"ML with Clojure is fun\\\" (0 4 5 6 8)}\\n\"}]], \"1613\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(ml/pipe-it\\n data\\n (mm/std-scale [0 1] {}))\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"322px\"}} [:p/markdown \":_unnamed [5 2]:\\n\\n|           0 |           1 |\\n|------------:|------------:|\\n|  1.13053908 | -1.04102352 |\\n| -0.94965283 |  0.11305233 |\\n|  0.00000000 | -0.94681324 |\\n|  0.85920970 |  0.58410369 |\\n| -1.04009595 |  1.29068074 |\\n\"]]], \"1674\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(-> transformed-ctx\\n    :metamorph/data\\n    (ds/reverse-map-categorical-xforms)\\n    (ds/select-columns :species)\\n    (ds/head))\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"322px\"}} [:p/markdown \":_unnamed [5 1]:\\n\\n|   :species |\\n|------------|\\n|  virginica |\\n| versicolor |\\n|     setosa |\\n|     setosa |\\n|  virginica |\\n\"]]], \"1605\" [:div [:p] nil nil [:p/markdown \"and we get the predictions: \"]], \"1534\" [:div [:p] [:div [:p/code {:code \"(def ctx-sparse\\n  (ml/fit\\n   bow-ds\\n   (mm/bow->SparseArray\\n    :bow :sparse\\n    {:create-vocab-fn\\n     (fn [bow] (scicloj.ml.smile.nlp/->vocabulary-top-n bow 1))\\n     })))\", :bg-class \"bg-light\"}]] nil nil], \"206\" [:div [:p] nil nil [:p/markdown \"A custom tokenizer can be specified by either passing options to\\n`scicloj.ml.smile.nlp/default-tokenize` \"]], \"1664\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\niris\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"322px\"}} [:p/markdown \"https://raw.githubusercontent.com/scicloj/metamorph.ml/main/test/data/iris.csv [150 5]:\\n\\n| :sepal_length | :sepal_width | :petal_length | :petal_width | :species |\\n|--------------:|-------------:|--------------:|-------------:|----------|\\n|           5.1 |          3.5 |           1.4 |          0.2 |   setosa |\\n|           4.9 |          3.0 |           1.4 |          0.2 |   setosa |\\n|           4.7 |          3.2 |           1.3 |          0.2 |   setosa |\\n|           4.6 |          3.1 |           1.5 |          0.2 |   setosa |\\n|           5.0 |          3.6 |           1.4 |          0.2 |   setosa |\\n\"]]], \"1689\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(:metamorph/data fitted-ctx)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"400px\"}} [:p/markdown \"_unnamed [208 3]:\\n\\n| :material |   pca-cov-0 |   pca-cov-1 |\\n|-----------|------------:|------------:|\\n|         M | -0.21914886 | -1.15380745 |\\n|         M | -0.67499623 |  1.48177627 |\\n|         R |  0.33861531 | -0.09315398 |\\n|         M |  0.68695347 | -0.68674742 |\\n|         R |  0.71854517 |  0.39356258 |\\n|         R | -0.60050744 | -0.19943257 |\\n|         M |  0.33083717 | -0.95484534 |\\n|         M |  0.39413141 |  0.03889119 |\\n|         R |  0.23467347 |  0.36520863 |\\n|         R | -1.11710742 | -0.54115016 |\\n|         M |  0.55519624 |  0.55981448 |\\n|         M |  0.28088718 |  0.28213827 |\\n|         M | -0.13058542 | -0.89968899 |\\n|         M |  0.81540074 |  1.20832697 |\\n|         R |  1.22936765 | -0.27666872 |\\n|         M | -0.24285546 | -0.05600851 |\\n|         R | -0.95623538 |  0.40336282 |\\n|         R | -0.88186044 |  0.38984989 |\\n|         M | -0.88782732 |  1.15522214 |\\n|         R | -0.22626634 | -0.68497148 |\\n|         M | -1.57472426 | -0.00899761 |\\n|         R |  0.41905230 |  0.17147989 |\\n|         M |  1.31421068 |  1.07020864 |\\n|         M | -0.37420424 | -0.12177948 |\\n|         M |  0.91196064 |  1.37553421 |\\n\"]]], \"1647\" [:div [:p] [:div [:p/code {:code \"^kind/dataset-grid\\ndata\", :bg-class \"bg-light\"}]] nil [:div {:class \"ag-theme-balham\", :style {:height \"150px\"}} [:p {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} [:small \"(showing at most 100 rows)\"]] [:p/dataset {:columnDefs [{:headerName \"text\", :field \"text\"}], :rowData ({\"text\" \"Hello Clojure world, hello ML word !\"} {\"text\" \"ML with Clojure is fun\"})}]]], \"1653\" [:div [:p] [:div [:p/code {:code \"(def ctx-sparse\\n  (ml/fit\\n   bow-ds\\n   (mm/bow->SparseArray :bow :sparse)))\", :bg-class \"bg-light\"}]] nil nil], \"1692\" [:div [:p] nil nil [:p/markdown \"The plot shows that the reduction to 2 dimensions does not create\\nlinear separable areas of `M` and `R`. So a linear model will not be\\n able to predict well the material from the 2 PCA components.\"]], \"1538\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(ml/pipe-it\\n bow-ds\\n (mm/bow->tfidf :bow :tfidf))\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"400px\"}} [:p/markdown \"_unnamed [2 3]:\\n\\n|                                :text |                                                 :bow |                      :tfidf |\\n|--------------------------------------|------------------------------------------------------|-----------------------------|\\n| Hello Clojure world, hello ML word ! | {hello 2, clojur 1, world 1, , 1, ml 1, word 1, ! 1} | {hello 0.0752574989159953,  |\\n|                                      |                                                      |  clojur 0.0,                |\\n|                                      |                                                      |  world 0.03762874945799765, |\\n|                                      |                                                      |  , 0.03762874945799765,     |\\n|                                      |                                                      |  ml 0.0,                    |\\n|                                      |                                                      |  word 0.03762874945799765,  |\\n|                                      |                                                      |  ! 0.03762874945799765}     |\\n|               ML with Clojure is fun |                {ml 1, with 1, clojur 1, is 1, fun 1} | {ml 0.0,                    |\\n|                                      |                                                      |  with 0.06020599913279624,  |\\n|                                      |                                                      |  clojur 0.0,                |\\n|                                      |                                                      |  is 0.06020599913279624,    |\\n|                                      |                                                      |  fun 0.06020599913279624}   |\\n\"]]], \"1645\" [:div [:p] nil nil [:p/markdown \"In the following we transform the text given in a dataset into a\\n map of token counts applying some default text normalization.\"]], \"1279\" [:div [:p] [:div [:p/code {:code \"(require '[scicloj.ml.core :as ml]\\n         '[scicloj.ml.dataset :as ds]\\n         '[scicloj.ml.metamorph :as mm]\\n         )\", :bg-class \"bg-light\"}]] nil nil], \"1682\" [:div [:p] [:div [:p/code {:code \"(def col-names (map #(keyword (str \\\"x\\\" %))\\n                    (range 60)))\", :bg-class \"bg-light\"}]] nil nil], \"1628\" [:div [:p] nil nil [:p/markdown \"It accesses the underlying Smile Java object to get the data on\\nthe cumulative variance for each PCA component.\"]], \"1216\" [:div [:p] nil nil [:p/markdown \"It even seems, that the reduction to 2 dimensions removes\\ntoo much information for predicting of the material for any type of model.\"]], \"1659\" [:div [:p] [:div [:p/code {:code \"ctx-sparse\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"{:metamorph/data _unnamed [2 3]:\\n\\n|                                :text |                                                               :bow | :sparse |\\n|--------------------------------------|--------------------------------------------------------------------|---------|\\n| Hello Clojure world, hello ML word ! | {\\\"hello\\\" 2, \\\"clojur\\\" 1, \\\"world\\\" 1, \\\",\\\" 1, \\\"ml\\\" 1, \\\"word\\\" 1, \\\"!\\\" 1} |   [0:1] |\\n|               ML with Clojure is fun |                    {\\\"ml\\\" 1, \\\"with\\\" 1, \\\"clojur\\\" 1, \\\"is\\\" 1, \\\"fun\\\" 1} |   [0:1] |\\n,\\n :metamorph/mode :fit,\\n :scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n {:vocab (\\\"ml\\\"),\\n  :vocab->index-map {\\\"ml\\\" 0},\\n  :index->vocab-map {0 \\\"ml\\\"}}}\\n\"}]], \"1679\" [:div [:p] nil nil [:p/markdown \"## Transformer **reduce-dimensions**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nMetamorph transformer, which reduces the dimensions of a given dataset.\\n\\n  `algorithm` can be any of:\\n    * :pca-cov\\n    * :pca-cor\\n    * :pca-prob\\n    * :kpca\\n    * :gha\\n    * :random\\n\\n  `target-dims` is number of dimensions to reduce to.\\n\\n  `cnames` is a sequence of column names on which the reduction get performed\\n\\n  `opts` are the options of the algorithm\\n\\n  metamorph                            | .\\n  -------------------------------------|----------------------------------------------------------------------------\\n  Behaviour in mode :fit               | Reduces dimensions of the dataset at key `:metamorph/data` and stores the trained model in ctx under key at `:metamorph/id`\\n  Behaviour in mode :transform         | Reads trained reduction model from ctx and applies it to data in `:metamorph/data`\\n  Reads keys from ctx                  | In mode `:transform` : Reads trained model to use from ctx at key in `:metamorph/id`.\\n  Writes keys to ctx                   | In mode `:fit` : Stores trained model in ctx under key in `:metamorph/id`.\\n\\n  \\n----------------------------------------------------------\"]], \"1656\" [:div [:p] nil nil [:p/markdown \"The SparseArray instances look like this:\"]], \"1683\" [:div [:p] [:div [:p/code {:code \"(def fitted-ctx\\n  (ml/fit\\n   sonar\\n   (mm/reduce-dimensions :pca-cov 60\\n                         col-names\\n                         {})))\", :bg-class \"bg-light\"}]] nil nil], \"1681\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nsonar\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"400px\"}} [:p/markdown \"_unnamed [208 61]:\\n\\n|    :x0 |    :x1 |    :x2 |    :x3 |    :x4 |    :x5 |    :x6 |    :x7 |    :x8 |    :x9 |   :x10 |   :x11 |   :x12 |   :x13 |   :x14 |   :x15 |   :x16 |   :x17 |   :x18 |   :x19 |   :x20 |   :x21 |   :x22 |   :x23 |   :x24 |   :x25 |   :x26 |   :x27 |   :x28 |   :x29 |   :x30 |   :x31 |   :x32 |   :x33 |   :x34 |   :x35 |   :x36 |   :x37 |   :x38 |   :x39 |   :x40 |   :x41 |   :x42 |   :x43 |   :x44 |   :x45 |   :x46 |   :x47 |   :x48 |   :x49 |   :x50 |   :x51 |   :x52 |   :x53 |   :x54 |   :x55 |   :x56 |   :x57 |   :x58 |   :x59 | :material |\\n|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-------:|-----------|\\n| 0.0200 | 0.0371 | 0.0428 | 0.0207 | 0.0954 | 0.0986 | 0.1539 | 0.1601 | 0.3109 | 0.2111 | 0.1609 | 0.1582 | 0.2238 | 0.0645 | 0.0660 | 0.2273 | 0.3100 | 0.2999 | 0.5078 | 0.4797 | 0.5783 | 0.5071 | 0.4328 | 0.5550 | 0.6711 | 0.6415 | 0.7104 | 0.8080 | 0.6791 | 0.3857 | 0.1307 | 0.2604 | 0.5121 | 0.7547 | 0.8537 | 0.8507 | 0.6692 | 0.6097 | 0.4943 | 0.2744 | 0.0510 | 0.2834 | 0.2825 | 0.4256 | 0.2641 | 0.1386 | 0.1051 | 0.1343 | 0.0383 | 0.0324 | 0.0232 | 0.0027 | 0.0065 | 0.0159 | 0.0072 | 0.0167 | 0.0180 | 0.0084 | 0.0090 | 0.0032 |         R |\\n| 0.0453 | 0.0523 | 0.0843 | 0.0689 | 0.1183 | 0.2583 | 0.2156 | 0.3481 | 0.3337 | 0.2872 | 0.4918 | 0.6552 | 0.6919 | 0.7797 | 0.7464 | 0.9444 | 1.0000 | 0.8874 | 0.8024 | 0.7818 | 0.5212 | 0.4052 | 0.3957 | 0.3914 | 0.3250 | 0.3200 | 0.3271 | 0.2767 | 0.4423 | 0.2028 | 0.3788 | 0.2947 | 0.1984 | 0.2341 | 0.1306 | 0.4182 | 0.3835 | 0.1057 | 0.1840 | 0.1970 | 0.1674 | 0.0583 | 0.1401 | 0.1628 | 0.0621 | 0.0203 | 0.0530 | 0.0742 | 0.0409 | 0.0061 | 0.0125 | 0.0084 | 0.0089 | 0.0048 | 0.0094 | 0.0191 | 0.0140 | 0.0049 | 0.0052 | 0.0044 |         R |\\n| 0.0262 | 0.0582 | 0.1099 | 0.1083 | 0.0974 | 0.2280 | 0.2431 | 0.3771 | 0.5598 | 0.6194 | 0.6333 | 0.7060 | 0.5544 | 0.5320 | 0.6479 | 0.6931 | 0.6759 | 0.7551 | 0.8929 | 0.8619 | 0.7974 | 0.6737 | 0.4293 | 0.3648 | 0.5331 | 0.2413 | 0.5070 | 0.8533 | 0.6036 | 0.8514 | 0.8512 | 0.5045 | 0.1862 | 0.2709 | 0.4232 | 0.3043 | 0.6116 | 0.6756 | 0.5375 | 0.4719 | 0.4647 | 0.2587 | 0.2129 | 0.2222 | 0.2111 | 0.0176 | 0.1348 | 0.0744 | 0.0130 | 0.0106 | 0.0033 | 0.0232 | 0.0166 | 0.0095 | 0.0180 | 0.0244 | 0.0316 | 0.0164 | 0.0095 | 0.0078 |         R |\\n| 0.0100 | 0.0171 | 0.0623 | 0.0205 | 0.0205 | 0.0368 | 0.1098 | 0.1276 | 0.0598 | 0.1264 | 0.0881 | 0.1992 | 0.0184 | 0.2261 | 0.1729 | 0.2131 | 0.0693 | 0.2281 | 0.4060 | 0.3973 | 0.2741 | 0.3690 | 0.5556 | 0.4846 | 0.3140 | 0.5334 | 0.5256 | 0.2520 | 0.2090 | 0.3559 | 0.6260 | 0.7340 | 0.6120 | 0.3497 | 0.3953 | 0.3012 | 0.5408 | 0.8814 | 0.9857 | 0.9167 | 0.6121 | 0.5006 | 0.3210 | 0.3202 | 0.4295 | 0.3654 | 0.2655 | 0.1576 | 0.0681 | 0.0294 | 0.0241 | 0.0121 | 0.0036 | 0.0150 | 0.0085 | 0.0073 | 0.0050 | 0.0044 | 0.0040 | 0.0117 |         R |\\n| 0.0762 | 0.0666 | 0.0481 | 0.0394 | 0.0590 | 0.0649 | 0.1209 | 0.2467 | 0.3564 | 0.4459 | 0.4152 | 0.3952 | 0.4256 | 0.4135 | 0.4528 | 0.5326 | 0.7306 | 0.6193 | 0.2032 | 0.4636 | 0.4148 | 0.4292 | 0.5730 | 0.5399 | 0.3161 | 0.2285 | 0.6995 | 1.0000 | 0.7262 | 0.4724 | 0.5103 | 0.5459 | 0.2881 | 0.0981 | 0.1951 | 0.4181 | 0.4604 | 0.3217 | 0.2828 | 0.2430 | 0.1979 | 0.2444 | 0.1847 | 0.0841 | 0.0692 | 0.0528 | 0.0357 | 0.0085 | 0.0230 | 0.0046 | 0.0156 | 0.0031 | 0.0054 | 0.0105 | 0.0110 | 0.0015 | 0.0072 | 0.0048 | 0.0107 | 0.0094 |         R |\\n| 0.0286 | 0.0453 | 0.0277 | 0.0174 | 0.0384 | 0.0990 | 0.1201 | 0.1833 | 0.2105 | 0.3039 | 0.2988 | 0.4250 | 0.6343 | 0.8198 | 1.0000 | 0.9988 | 0.9508 | 0.9025 | 0.7234 | 0.5122 | 0.2074 | 0.3985 | 0.5890 | 0.2872 | 0.2043 | 0.5782 | 0.5389 | 0.3750 | 0.3411 | 0.5067 | 0.5580 | 0.4778 | 0.3299 | 0.2198 | 0.1407 | 0.2856 | 0.3807 | 0.4158 | 0.4054 | 0.3296 | 0.2707 | 0.2650 | 0.0723 | 0.1238 | 0.1192 | 0.1089 | 0.0623 | 0.0494 | 0.0264 | 0.0081 | 0.0104 | 0.0045 | 0.0014 | 0.0038 | 0.0013 | 0.0089 | 0.0057 | 0.0027 | 0.0051 | 0.0062 |         R |\\n| 0.0317 | 0.0956 | 0.1321 | 0.1408 | 0.1674 | 0.1710 | 0.0731 | 0.1401 | 0.2083 | 0.3513 | 0.1786 | 0.0658 | 0.0513 | 0.3752 | 0.5419 | 0.5440 | 0.5150 | 0.4262 | 0.2024 | 0.4233 | 0.7723 | 0.9735 | 0.9390 | 0.5559 | 0.5268 | 0.6826 | 0.5713 | 0.5429 | 0.2177 | 0.2149 | 0.5811 | 0.6323 | 0.2965 | 0.1873 | 0.2969 | 0.5163 | 0.6153 | 0.4283 | 0.5479 | 0.6133 | 0.5017 | 0.2377 | 0.1957 | 0.1749 | 0.1304 | 0.0597 | 0.1124 | 0.1047 | 0.0507 | 0.0159 | 0.0195 | 0.0201 | 0.0248 | 0.0131 | 0.0070 | 0.0138 | 0.0092 | 0.0143 | 0.0036 | 0.0103 |         R |\\n| 0.0519 | 0.0548 | 0.0842 | 0.0319 | 0.1158 | 0.0922 | 0.1027 | 0.0613 | 0.1465 | 0.2838 | 0.2802 | 0.3086 | 0.2657 | 0.3801 | 0.5626 | 0.4376 | 0.2617 | 0.1199 | 0.6676 | 0.9402 | 0.7832 | 0.5352 | 0.6809 | 0.9174 | 0.7613 | 0.8220 | 0.8872 | 0.6091 | 0.2967 | 0.1103 | 0.1318 | 0.0624 | 0.0990 | 0.4006 | 0.3666 | 0.1050 | 0.1915 | 0.3930 | 0.4288 | 0.2546 | 0.1151 | 0.2196 | 0.1879 | 0.1437 | 0.2146 | 0.2360 | 0.1125 | 0.0254 | 0.0285 | 0.0178 | 0.0052 | 0.0081 | 0.0120 | 0.0045 | 0.0121 | 0.0097 | 0.0085 | 0.0047 | 0.0048 | 0.0053 |         R |\\n| 0.0223 | 0.0375 | 0.0484 | 0.0475 | 0.0647 | 0.0591 | 0.0753 | 0.0098 | 0.0684 | 0.1487 | 0.1156 | 0.1654 | 0.3833 | 0.3598 | 0.1713 | 0.1136 | 0.0349 | 0.3796 | 0.7401 | 0.9925 | 0.9802 | 0.8890 | 0.6712 | 0.4286 | 0.3374 | 0.7366 | 0.9611 | 0.7353 | 0.4856 | 0.1594 | 0.3007 | 0.4096 | 0.3170 | 0.3305 | 0.3408 | 0.2186 | 0.2463 | 0.2726 | 0.1680 | 0.2792 | 0.2558 | 0.1740 | 0.2121 | 0.1099 | 0.0985 | 0.1271 | 0.1459 | 0.1164 | 0.0777 | 0.0439 | 0.0061 | 0.0145 | 0.0128 | 0.0145 | 0.0058 | 0.0049 | 0.0065 | 0.0093 | 0.0059 | 0.0022 |         R |\\n| 0.0164 | 0.0173 | 0.0347 | 0.0070 | 0.0187 | 0.0671 | 0.1056 | 0.0697 | 0.0962 | 0.0251 | 0.0801 | 0.1056 | 0.1266 | 0.0890 | 0.0198 | 0.1133 | 0.2826 | 0.3234 | 0.3238 | 0.4333 | 0.6068 | 0.7652 | 0.9203 | 0.9719 | 0.9207 | 0.7545 | 0.8289 | 0.8907 | 0.7309 | 0.6896 | 0.5829 | 0.4935 | 0.3101 | 0.0306 | 0.0244 | 0.1108 | 0.1594 | 0.1371 | 0.0696 | 0.0452 | 0.0620 | 0.1421 | 0.1597 | 0.1384 | 0.0372 | 0.0688 | 0.0867 | 0.0513 | 0.0092 | 0.0198 | 0.0118 | 0.0090 | 0.0223 | 0.0179 | 0.0084 | 0.0068 | 0.0032 | 0.0035 | 0.0056 | 0.0040 |         R |\\n| 0.0039 | 0.0063 | 0.0152 | 0.0336 | 0.0310 | 0.0284 | 0.0396 | 0.0272 | 0.0323 | 0.0452 | 0.0492 | 0.0996 | 0.1424 | 0.1194 | 0.0628 | 0.0907 | 0.1177 | 0.1429 | 0.1223 | 0.1104 | 0.1847 | 0.3715 | 0.4382 | 0.5707 | 0.6654 | 0.7476 | 0.7654 | 0.8555 | 0.9720 | 0.9221 | 0.7502 | 0.7209 | 0.7757 | 0.6055 | 0.5021 | 0.4499 | 0.3947 | 0.4281 | 0.4427 | 0.3749 | 0.1972 | 0.0511 | 0.0793 | 0.1269 | 0.1533 | 0.0690 | 0.0402 | 0.0534 | 0.0228 | 0.0073 | 0.0062 | 0.0062 | 0.0120 | 0.0052 | 0.0056 | 0.0093 | 0.0042 | 0.0003 | 0.0053 | 0.0036 |         R |\\n| 0.0123 | 0.0309 | 0.0169 | 0.0313 | 0.0358 | 0.0102 | 0.0182 | 0.0579 | 0.1122 | 0.0835 | 0.0548 | 0.0847 | 0.2026 | 0.2557 | 0.1870 | 0.2032 | 0.1463 | 0.2849 | 0.5824 | 0.7728 | 0.7852 | 0.8515 | 0.5312 | 0.3653 | 0.5973 | 0.8275 | 1.0000 | 0.8673 | 0.6301 | 0.4591 | 0.3940 | 0.2576 | 0.2817 | 0.2641 | 0.2757 | 0.2698 | 0.3994 | 0.4576 | 0.3940 | 0.2522 | 0.1782 | 0.1354 | 0.0516 | 0.0337 | 0.0894 | 0.0861 | 0.0872 | 0.0445 | 0.0134 | 0.0217 | 0.0188 | 0.0133 | 0.0265 | 0.0224 | 0.0074 | 0.0118 | 0.0026 | 0.0092 | 0.0009 | 0.0044 |         R |\\n| 0.0079 | 0.0086 | 0.0055 | 0.0250 | 0.0344 | 0.0546 | 0.0528 | 0.0958 | 0.1009 | 0.1240 | 0.1097 | 0.1215 | 0.1874 | 0.3383 | 0.3227 | 0.2723 | 0.3943 | 0.6432 | 0.7271 | 0.8673 | 0.9674 | 0.9847 | 0.9480 | 0.8036 | 0.6833 | 0.5136 | 0.3090 | 0.0832 | 0.4019 | 0.2344 | 0.1905 | 0.1235 | 0.1717 | 0.2351 | 0.2489 | 0.3649 | 0.3382 | 0.1589 | 0.0989 | 0.1089 | 0.1043 | 0.0839 | 0.1391 | 0.0819 | 0.0678 | 0.0663 | 0.1202 | 0.0692 | 0.0152 | 0.0266 | 0.0174 | 0.0176 | 0.0127 | 0.0088 | 0.0098 | 0.0019 | 0.0059 | 0.0058 | 0.0059 | 0.0032 |         R |\\n| 0.0090 | 0.0062 | 0.0253 | 0.0489 | 0.1197 | 0.1589 | 0.1392 | 0.0987 | 0.0955 | 0.1895 | 0.1896 | 0.2547 | 0.4073 | 0.2988 | 0.2901 | 0.5326 | 0.4022 | 0.1571 | 0.3024 | 0.3907 | 0.3542 | 0.4438 | 0.6414 | 0.4601 | 0.6009 | 0.8690 | 0.8345 | 0.7669 | 0.5081 | 0.4620 | 0.5380 | 0.5375 | 0.3844 | 0.3601 | 0.7402 | 0.7761 | 0.3858 | 0.0667 | 0.3684 | 0.6114 | 0.3510 | 0.2312 | 0.2195 | 0.3051 | 0.1937 | 0.1570 | 0.0479 | 0.0538 | 0.0146 | 0.0068 | 0.0187 | 0.0059 | 0.0095 | 0.0194 | 0.0080 | 0.0152 | 0.0158 | 0.0053 | 0.0189 | 0.0102 |         R |\\n| 0.0124 | 0.0433 | 0.0604 | 0.0449 | 0.0597 | 0.0355 | 0.0531 | 0.0343 | 0.1052 | 0.2120 | 0.1640 | 0.1901 | 0.3026 | 0.2019 | 0.0592 | 0.2390 | 0.3657 | 0.3809 | 0.5929 | 0.6299 | 0.5801 | 0.4574 | 0.4449 | 0.3691 | 0.6446 | 0.8940 | 0.8978 | 0.4980 | 0.3333 | 0.2350 | 0.1553 | 0.3666 | 0.4340 | 0.3082 | 0.3024 | 0.4109 | 0.5501 | 0.4129 | 0.5499 | 0.5018 | 0.3132 | 0.2802 | 0.2351 | 0.2298 | 0.1155 | 0.0724 | 0.0621 | 0.0318 | 0.0450 | 0.0167 | 0.0078 | 0.0083 | 0.0057 | 0.0174 | 0.0188 | 0.0054 | 0.0114 | 0.0196 | 0.0147 | 0.0062 |         R |\\n| 0.0298 | 0.0615 | 0.0650 | 0.0921 | 0.1615 | 0.2294 | 0.2176 | 0.2033 | 0.1459 | 0.0852 | 0.2476 | 0.3645 | 0.2777 | 0.2826 | 0.3237 | 0.4335 | 0.5638 | 0.4555 | 0.4348 | 0.6433 | 0.3932 | 0.1989 | 0.3540 | 0.9165 | 0.9371 | 0.4620 | 0.2771 | 0.6613 | 0.8028 | 0.4200 | 0.5192 | 0.6962 | 0.5792 | 0.8889 | 0.7863 | 0.7133 | 0.7615 | 0.4401 | 0.3009 | 0.3163 | 0.2809 | 0.2898 | 0.0526 | 0.1867 | 0.1553 | 0.1633 | 0.1252 | 0.0748 | 0.0452 | 0.0064 | 0.0154 | 0.0031 | 0.0153 | 0.0071 | 0.0212 | 0.0076 | 0.0152 | 0.0049 | 0.0200 | 0.0073 |         R |\\n| 0.0352 | 0.0116 | 0.0191 | 0.0469 | 0.0737 | 0.1185 | 0.1683 | 0.1541 | 0.1466 | 0.2912 | 0.2328 | 0.2237 | 0.2470 | 0.1560 | 0.3491 | 0.3308 | 0.2299 | 0.2203 | 0.2493 | 0.4128 | 0.3158 | 0.6191 | 0.5854 | 0.3395 | 0.2561 | 0.5599 | 0.8145 | 0.6941 | 0.6985 | 0.8660 | 0.5930 | 0.3664 | 0.6750 | 0.8697 | 0.7837 | 0.7552 | 0.5789 | 0.4713 | 0.1252 | 0.6087 | 0.7322 | 0.5977 | 0.3431 | 0.1803 | 0.2378 | 0.3424 | 0.2303 | 0.0689 | 0.0216 | 0.0469 | 0.0426 | 0.0346 | 0.0158 | 0.0154 | 0.0109 | 0.0048 | 0.0095 | 0.0015 | 0.0073 | 0.0067 |         R |\\n| 0.0192 | 0.0607 | 0.0378 | 0.0774 | 0.1388 | 0.0809 | 0.0568 | 0.0219 | 0.1037 | 0.1186 | 0.1237 | 0.1601 | 0.3520 | 0.4479 | 0.3769 | 0.5761 | 0.6426 | 0.6790 | 0.7157 | 0.5466 | 0.5399 | 0.6362 | 0.7849 | 0.7756 | 0.5780 | 0.4862 | 0.4181 | 0.2457 | 0.0716 | 0.0613 | 0.1816 | 0.4493 | 0.5976 | 0.3785 | 0.2495 | 0.5771 | 0.8852 | 0.8409 | 0.3570 | 0.3133 | 0.6096 | 0.6378 | 0.2709 | 0.1419 | 0.1260 | 0.1288 | 0.0790 | 0.0829 | 0.0520 | 0.0216 | 0.0360 | 0.0331 | 0.0131 | 0.0120 | 0.0108 | 0.0024 | 0.0045 | 0.0037 | 0.0112 | 0.0075 |         R |\\n| 0.0270 | 0.0092 | 0.0145 | 0.0278 | 0.0412 | 0.0757 | 0.1026 | 0.1138 | 0.0794 | 0.1520 | 0.1675 | 0.1370 | 0.1361 | 0.1345 | 0.2144 | 0.5354 | 0.6830 | 0.5600 | 0.3093 | 0.3226 | 0.4430 | 0.5573 | 0.5782 | 0.6173 | 0.8132 | 0.9819 | 0.9823 | 0.9166 | 0.7423 | 0.7736 | 0.8473 | 0.7352 | 0.6671 | 0.6083 | 0.6239 | 0.5972 | 0.5715 | 0.5242 | 0.2924 | 0.1536 | 0.2003 | 0.2031 | 0.2207 | 0.1778 | 0.1353 | 0.1373 | 0.0749 | 0.0472 | 0.0325 | 0.0179 | 0.0045 | 0.0084 | 0.0010 | 0.0018 | 0.0068 | 0.0039 | 0.0120 | 0.0132 | 0.0070 | 0.0088 |         R |\\n| 0.0126 | 0.0149 | 0.0641 | 0.1732 | 0.2565 | 0.2559 | 0.2947 | 0.4110 | 0.4983 | 0.5920 | 0.5832 | 0.5419 | 0.5472 | 0.5314 | 0.4981 | 0.6985 | 0.8292 | 0.7839 | 0.8215 | 0.9363 | 1.0000 | 0.9224 | 0.7839 | 0.5470 | 0.4562 | 0.5922 | 0.5448 | 0.3971 | 0.0882 | 0.2385 | 0.2005 | 0.0587 | 0.2544 | 0.2009 | 0.0329 | 0.1547 | 0.1212 | 0.2446 | 0.3171 | 0.3195 | 0.3051 | 0.0836 | 0.1266 | 0.1381 | 0.1136 | 0.0516 | 0.0073 | 0.0278 | 0.0372 | 0.0121 | 0.0153 | 0.0092 | 0.0035 | 0.0098 | 0.0121 | 0.0006 | 0.0181 | 0.0094 | 0.0116 | 0.0063 |         R |\\n| 0.0473 | 0.0509 | 0.0819 | 0.1252 | 0.1783 | 0.3070 | 0.3008 | 0.2362 | 0.3830 | 0.3759 | 0.3021 | 0.2909 | 0.2301 | 0.1411 | 0.1582 | 0.2430 | 0.4474 | 0.5964 | 0.6744 | 0.7969 | 0.8319 | 0.7813 | 0.8626 | 0.7369 | 0.4122 | 0.2596 | 0.3392 | 0.3788 | 0.4488 | 0.6281 | 0.7449 | 0.7328 | 0.7704 | 0.7870 | 0.6048 | 0.5860 | 0.6385 | 0.7279 | 0.6286 | 0.5316 | 0.4069 | 0.1791 | 0.1625 | 0.2527 | 0.1903 | 0.1643 | 0.0604 | 0.0209 | 0.0436 | 0.0175 | 0.0107 | 0.0193 | 0.0118 | 0.0064 | 0.0042 | 0.0054 | 0.0049 | 0.0082 | 0.0028 | 0.0027 |         R |\\n| 0.0664 | 0.0575 | 0.0842 | 0.0372 | 0.0458 | 0.0771 | 0.0771 | 0.1130 | 0.2353 | 0.1838 | 0.2869 | 0.4129 | 0.3647 | 0.1984 | 0.2840 | 0.4039 | 0.5837 | 0.6792 | 0.6086 | 0.4858 | 0.3246 | 0.2013 | 0.2082 | 0.1686 | 0.2484 | 0.2736 | 0.2984 | 0.4655 | 0.6990 | 0.7474 | 0.7956 | 0.7981 | 0.6715 | 0.6942 | 0.7440 | 0.8169 | 0.8912 | 1.0000 | 0.8753 | 0.7061 | 0.6803 | 0.5898 | 0.4618 | 0.3639 | 0.1492 | 0.1216 | 0.1306 | 0.1198 | 0.0578 | 0.0235 | 0.0135 | 0.0141 | 0.0190 | 0.0043 | 0.0036 | 0.0026 | 0.0024 | 0.0162 | 0.0109 | 0.0079 |         R |\\n| 0.0099 | 0.0484 | 0.0299 | 0.0297 | 0.0652 | 0.1077 | 0.2363 | 0.2385 | 0.0075 | 0.1882 | 0.1456 | 0.1892 | 0.3176 | 0.1340 | 0.2169 | 0.2458 | 0.2589 | 0.2786 | 0.2298 | 0.0656 | 0.1441 | 0.1179 | 0.1668 | 0.1783 | 0.2476 | 0.2570 | 0.1036 | 0.5356 | 0.7124 | 0.6291 | 0.4756 | 0.6015 | 0.7208 | 0.6234 | 0.5725 | 0.7523 | 0.8712 | 0.9252 | 0.9709 | 0.9297 | 0.8995 | 0.7911 | 0.5600 | 0.2838 | 0.4407 | 0.5507 | 0.4331 | 0.2905 | 0.1981 | 0.0779 | 0.0396 | 0.0173 | 0.0149 | 0.0115 | 0.0202 | 0.0139 | 0.0029 | 0.0160 | 0.0106 | 0.0134 |         R |\\n| 0.0115 | 0.0150 | 0.0136 | 0.0076 | 0.0211 | 0.1058 | 0.1023 | 0.0440 | 0.0931 | 0.0734 | 0.0740 | 0.0622 | 0.1055 | 0.1183 | 0.1721 | 0.2584 | 0.3232 | 0.3817 | 0.4243 | 0.4217 | 0.4449 | 0.4075 | 0.3306 | 0.4012 | 0.4466 | 0.5218 | 0.7552 | 0.9503 | 1.0000 | 0.9084 | 0.8283 | 0.7571 | 0.7262 | 0.6152 | 0.5680 | 0.5757 | 0.5324 | 0.3672 | 0.1669 | 0.0866 | 0.0646 | 0.1891 | 0.2683 | 0.2887 | 0.2341 | 0.1668 | 0.1015 | 0.1195 | 0.0704 | 0.0167 | 0.0107 | 0.0091 | 0.0016 | 0.0084 | 0.0064 | 0.0026 | 0.0029 | 0.0037 | 0.0070 | 0.0041 |         R |\\n| 0.0293 | 0.0644 | 0.0390 | 0.0173 | 0.0476 | 0.0816 | 0.0993 | 0.0315 | 0.0736 | 0.0860 | 0.0414 | 0.0472 | 0.0835 | 0.0938 | 0.1466 | 0.0809 | 0.1179 | 0.2179 | 0.3326 | 0.3258 | 0.2111 | 0.2302 | 0.3361 | 0.4259 | 0.4609 | 0.2606 | 0.0874 | 0.2862 | 0.5606 | 0.8344 | 0.8096 | 0.7250 | 0.8048 | 0.9435 | 1.0000 | 0.8960 | 0.5516 | 0.3037 | 0.2338 | 0.2382 | 0.3318 | 0.3821 | 0.1575 | 0.2228 | 0.1582 | 0.1433 | 0.1634 | 0.1133 | 0.0567 | 0.0133 | 0.0170 | 0.0035 | 0.0052 | 0.0083 | 0.0078 | 0.0075 | 0.0105 | 0.0160 | 0.0095 | 0.0011 |         R |\\n\"]]], \"1672\" [:div [:p] [:div [:p/code {:code \"(def transformed-ctx\\n  (ml/transform pipe-fn fitted-ctx (:test-ds train-test)))\", :bg-class \"bg-light\"}]] nil nil], \"1644\" [:div [:p] nil nil nil], \"1675\" [:div [:p] nil nil [:p/markdown \"## Transformer **std-scale**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nMetamorph transfomer, which centers and scales the dataset per column.\\n\\n  `col-seq` is a sequence of column names to work on\\n\\n  `options` are the options for the scaler and can take:\\n\\n  `mean?` If true (default), the data gets shifted by the column means, so 0 centered\\n\\n  `stddev?` If true (default), the data gets scaled by the standard deviation of the column\\n\\n  metamorph                            | .\\n  -------------------------------------|----------------------------------------------------------------------------\\n  Behaviour in mode :fit               | Centers and scales the dataset at key `:metamorph/data` and stores the trained model in ctx under key at `:metamorph/id`\\n  Behaviour in mode :transform         | Reads trained std-scale model from ctx and applies it to data in `:metamorph/data`\\n  Reads keys from ctx                  | In mode `:transform` : Reads trained model to use for from key in `:metamorph/id`.\\n  Writes keys to ctx                   | In mode `:fit` : Stores trained model in key $id\\n\\n  \\n----------------------------------------------------------\"]], \"1677\" [:div [:p] nil nil [:p/markdown \"Now we can center each column arround 0 and scale\\nit by the standard deviation  of the column\"]], \"1646\" [:div [:p] [:div [:p/code {:code \"(def data (ds/dataset {:text [\\\"Hello Clojure world, hello ML word !\\\"\\n                              \\\"ML with Clojure is fun\\\"\\n                              ]}))\", :bg-class \"bg-light\"}]] nil nil], \"1541\" [:div [:p] nil nil [:p/markdown \"We use the Iris data for this example:\"]], \"1652\" [:div [:p] nil nil [:p/markdown \"## Transformer **bow->SparseArray**\\n----------------------------------------------------------\\n__Clojure doc__:\\n\\nConverts a bag-of-word column `bow-col` to sparse indices column `indices-col`,\\n   as needed by the discrete naive bayes model.\\n\\n  `Options` can be of:\\n\\n  `create-vocab-fn` A function which converts the bow map to a list of tokens.\\n                    Defaults to scicloj.ml.smile.nlp/create-vocab-all\\n\\n  The sparse data is represented as `smile.util.SparseArray`.\\n\\n  metamorph                            |.\\n  -------------------------------------|---------\\n  Behaviour in mode :fit               |normal\\n  Behaviour in mode :transform         |normal\\n  Reads keys from ctx                  |none\\n  Writes keys to ctx                   |:scicloj.ml.smile.metamorph/bow->sparse-vocabulary\\n\\n  \\n----------------------------------------------------------\"]], \"1609\" [:div [:p] nil nil [:p/markdown \"Lets take some example data:\"]]}}");
     document.getElementById("loading").remove();
    </script>
</html>
